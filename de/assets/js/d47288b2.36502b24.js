"use strict";(globalThis.webpackChunkruyisdk=globalThis.webpackChunkruyisdk||[]).push([[5800],{18813(e,t,a){a.r(t),a.d(t,{default:()=>re});var s=a(30758),n=a(93618),l=a(67562),i=a(41707),r=a(91627),o=a(88603),c=a(78406),d=a(94526),m=a(60934),u=a(30717),h=a(49686),x=a(66903),p=a(27400),g=a(90052);const f=()=>{const{siteConfig:{customFields:e}}=(0,g.A)();return(0,s.useMemo)(()=>{if(!e.apiURL)return null;return p.A.create({baseURL:`https://${e.apiURL}`,timeout:1e4,headers:{"Content-Type":"application/json"}})},[e.apiURL])};var v=a(84799);const y={container:"container_K9Vd",mainContent:"mainContent_IFq6",installSection:"installSection_Prus",installContainer:"installContainer_j6Sb",installContent:"installContent_pWem",installTitle:"installTitle_WKa1",installIcon:"installIcon_S3HE",installValue:"installValue_AC_4",statsSection:"statsSection_aYEI",statsRow:"statsRow_Ui_e",statCard:"statCard_xrKJ",statIcon:"statIcon_t6nk",statContent:"statContent_GiAO",statTitle:"statTitle_uZSO",statValue:"statValue_y9y1",valueNumber:"valueNumber_Q1fe",loadingSkeleton:"loadingSkeleton_OFPU",categorySection:"categorySection_utrp",sectionTitle:"sectionTitle_eMsW",categoryGrid:"categoryGrid_lWLG",categoryCard:"categoryCard_gOUl",categoryHeader:"categoryHeader_EdRX",categoryName:"categoryName_HboR",categoryValue:"categoryValue_CqoZ",categoryProgress:"categoryProgress_a0hQ",chartsSection:"chartsSection_V2Lw",chartCard:"chartCard_DdOt",chartContainer:"chartContainer_vuZK",chartTitle:"chartTitle_LoLM",chartWrapper:"chartWrapper_zTfd",chart:"chart_TLiG",emptyState:"emptyState_JsSJ",emptyIcon:"emptyIcon_r896",emptyText:"emptyText_tTyr",updateTime:"updateTime_GT_o","ant-col":"ant-col_o6x4"};var j=a(20281);const _="statCard_gRfp",b="statIcon_l9dh",N="statContent_JS1w",w="statTitle_wRva",T="statValue_APbm",C="loadingSkeleton_VLym",S="standaloneContainer_kQ_C",A="flipCounter_uQpi",E="flipDigit_9fVB",I="flipCard_OGfP",k="flipping_nJyy",R="flipCardFront_XxWT",M="flipCardBack_gjD9";var V=a(86070);const $=({digit:e})=>{const[t,a]=(0,s.useState)(e),[n,l]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{e!==t&&(l(!0),setTimeout(()=>{a(e),l(!1)},300))},[e,t]),(0,V.jsx)("div",{className:E,children:(0,V.jsxs)("div",{className:`${I} ${n?k:""}`,children:[(0,V.jsx)("div",{className:R,children:(0,V.jsx)("span",{children:t})}),(0,V.jsx)("div",{className:M,children:(0,V.jsx)("span",{children:e})})]})})},L=({value:e,title:t,icon:a,color:n,loading:l,standalone:i=!1})=>{const[r,o]=(0,s.useState)(0),[c,d]=(0,s.useState)(!1),m=(0,s.useRef)(null);(0,s.useEffect)(()=>{if("undefined"==typeof window)return;const e=new IntersectionObserver(([e])=>{e.isIntersecting&&d(!0)},{threshold:.1});return m.current&&e.observe(m.current),()=>e.disconnect()},[]),(0,s.useEffect)(()=>{if(c&&!l&&"number"==typeof e){const t=60,a=e/t;let s=0;const n=setInterval(()=>{s+=a,s>=e?(o(e),clearInterval(n)):o(Math.floor(s))},2e3/t);return()=>clearInterval(n)}},[c,e,l]);const u=(x=r,x.toString().padStart(6,"0")).split("");var x;return i?(0,V.jsx)("div",{className:S,ref:m,children:(0,V.jsx)("div",{className:A,children:u.map((e,t)=>(0,V.jsx)($,{digit:parseInt(e)},t))})}):(0,V.jsxs)("div",{className:_,ref:m,"data-stat":t,children:[(0,V.jsx)("div",{className:b,style:{color:n},children:(0,V.jsx)(h.A,{})}),(0,V.jsxs)("div",{className:N,children:[(0,V.jsx)("h3",{className:w,children:t}),(0,V.jsx)("div",{className:T,children:l?(0,V.jsx)("div",{className:C}):(0,V.jsx)("div",{className:A,children:u.map((e,t)=>(0,V.jsx)($,{digit:parseInt(e)},t))})})]})]})},D=["#0A2C7E","#1A3A8E","#2A4A9E","#3A5AAE","#4A6ABE","#5A7ACE","#6A8ADE","#7A9AEE","#8AAAEE","#9ABAEE"],O={id:"\u6682\u65e0\u6570\u636e",message:"\u6682\u65e0\u6570\u636e"},F={id:"\u6700\u5e38\u7528\u6307\u4ee4 Top Commands",message:"\u6700\u5e38\u7528\u6307\u4ee4"},W={id:"\u6700\u5e38\u7528\u5305 Top Packages",message:"\u6700\u5e38\u7528\u5305"},P={id:"\u6700\u5e38\u7528\u6307\u4ee4",message:"\u6700\u5e38\u7528\u6307\u4ee4"},K={id:"\u6700\u5e38\u7528\u5305",message:"\u6700\u5e38\u7528\u5305"},G={id:"ruyi\u5b89\u88c5\u53f0\u6570",message:"ruyi\u5b89\u88c5\u53f0\u6570"},z={id:"\u8be6\u7ec6\u4e0b\u8f7d\u7edf\u8ba1",message:"\u8be6\u7ec6\u4e0b\u8f7d\u7edf\u8ba1"},U={id:"\u7ec4\u4ef6\u4e0b\u8f7d\u6570\u91cf",message:"\u7ec4\u4ef6\u4e0b\u8f7d\u6570\u91cf"},H={id:"ruyi\u5305\u7ba1\u7406\u5668\u4e0b\u8f7d\u6b21\u6570",message:"ruyi\u5305\u7ba1\u7406\u5668\u4e0b\u8f7d\u6b21\u6570"},q={id:"IDE\u4e0b\u8f7d\u6b21\u6570",message:"IDE\u4e0b\u8f7d\u6b21\u6570"},B={id:"vscode\u4e0b\u8f7d\u6b21\u6570",message:"VSCode\u4e0b\u8f7d\u6b21\u6570"},J={id:"\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u4e0b\u8f7d\u6b21\u6570",message:"\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u4e0b\u8f7d\u6b21\u6570"},Q={id:"\u6587\u6863\u4e0b\u8f7d\u6570\u91cf",message:"\u6587\u6863\u4e0b\u8f7d\u6570\u91cf"},X={id:"\u6570\u636e\u66f4\u65b0\u65f6\u95f4",message:"\u6570\u636e\u66f4\u65b0\u65f6\u95f4"},Z=()=>(0,V.jsxs)("div",{className:y.emptyState,children:[(0,V.jsx)(m.A,{className:y.emptyIcon}),(0,V.jsx)("p",{className:y.emptyText,children:(0,v.T)(O)})]}),Y=({title:e,value:t,icon:a,color:n,loading:l})=>{const[i,r]=(0,s.useState)(0),{elementRef:o,isVisible:c}=((e,t={threshold:.1})=>{const a=(0,s.useRef)(null),[n,l]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if("undefined"==typeof window)return;const s=new IntersectionObserver(([t])=>{t.isIntersecting&&(l(!0),e?.(t))},t);return a.current&&s.observe(a.current),()=>s.disconnect()},[e,t]),{elementRef:a,isVisible:n}})();return(0,s.useEffect)(()=>{if(c&&!l&&"number"==typeof t){const e=t/60;let a=0;const s=setInterval(()=>{a+=e,a>=t?(r(t),clearInterval(s)):r(Math.floor(a))},2e3/60);return()=>clearInterval(s)}},[c,t,l]),(0,V.jsxs)("div",{className:y.statCard,ref:o,"data-stat":e,children:[(0,V.jsx)("div",{className:y.statIcon,style:{color:n},children:a}),(0,V.jsxs)("div",{className:y.statContent,children:[(0,V.jsx)("h3",{className:y.statTitle,children:e}),(0,V.jsx)("div",{className:y.statValue,children:l?(0,V.jsx)("div",{className:y.loadingSkeleton}):(0,V.jsx)("span",{className:y.valueNumber,children:"number"==typeof t?i.toLocaleString():t})})]})]})},ee=({data:e,title:t})=>{const a=(0,s.useRef)(),n=(0,s.useRef)(),l=((e,t)=>{const[a,n]=(0,s.useState)(e);return(0,s.useEffect)(()=>{const a=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(a)}},[e,t]),a})(e,300),i=(0,s.useMemo)(()=>l?Object.entries(e).map(([e,{total:t}])=>({action:e,total:t,logTotal:Math.pow(t,.4)*(1+t/2e3)*.6})).sort((e,t)=>t.total-e.total).slice(0,10):[],[l]);return(0,s.useEffect)(()=>{if("undefined"==typeof window||!i.length||!a.current)return;n.current&&n.current.destroy();const e=new j.t1({container:a.current,autoFit:!0,events:{enabled:!1}});n.current=e,e.coordinate({transform:[{type:"transpose"}]}),e.interval().style({fill:(e,t)=>{const a=Math.max(...i.map(e=>e.total)),s=Math.min(...i.map(e=>e.total)),n=(e.total-s)/(a-s),l=Math.floor((1-n)*(D.length-1));return D[l]}}).data(i).transform({type:"sortX",reverse:!0,by:"y"}).axis("x",{line:!1,title:!1,label:!1,tick:!1,grid:!1}).axis("y",{title:!1,line:!1,tick:!1,grid:!1}).encode("x","action").encode("y","logTotal").scale("y",{nice:!1,padding:.6,min:0,max:3.5*Math.max(...i.map(e=>e.logTotal)),tickCount:0}).scale("x",{padding:.6,tickCount:0}).style("maxWidth",200).label({text:"action",position:"top-left",fill:"#2E3A46",dy:-12,fontWeight:600,fontSize:12}).label({text:"total",position:"inside",fill:"#ffffff",dy:0,dx:-5,fontWeight:700,fontSize:12}).interaction({tooltip:{body:!1}}),e.interaction("view-scroll",!1),e.render()},[i]),(0,V.jsxs)("div",{className:y.chartContainer,children:[(0,V.jsx)("h3",{className:y.chartTitle,children:t}),(0,V.jsx)("div",{className:y.chartWrapper,children:i.length?(0,V.jsx)("div",{ref:a,className:y.chart}):(0,V.jsx)(Z,{})})]})},te=({pmDownloads:e,loading:t})=>(0,V.jsx)("div",{className:y.installSection,children:(0,V.jsx)("div",{className:y.installContainer,children:(0,V.jsxs)("div",{className:y.installContent,children:[(0,V.jsxs)("h2",{className:y.installTitle,children:[(0,V.jsx)("span",{className:y.installIcon,children:"\ud83d\udcbb"}),(0,v.T)(H)]}),(0,V.jsx)("div",{className:y.installValue,children:t?(0,V.jsx)("div",{className:y.loadingSkeleton}):(0,V.jsx)(L,{value:e,loading:t,standalone:!0})})]})})}),ae=({data:e,loading:t,isMobile:a})=>{const s=e?.installs?.total||0,n=e?.downloads?.total||0,r=e?.pm_downloads?.total||0;return(0,V.jsx)("div",{className:y.statsSection,children:(0,V.jsxs)(l.A,{gutter:[24,24],className:y.statsRow,children:[!a&&(0,V.jsx)(i.A,{xs:24,sm:12,lg:8,children:(0,V.jsx)(Y,{title:(0,v.T)(H),value:r,icon:(0,V.jsx)(u.A,{}),color:"#07a0cc",loading:t})}),(0,V.jsx)(i.A,{xs:24,sm:12,lg:a?12:8,children:(0,V.jsx)(Y,{title:(0,v.T)(U),value:n,icon:(0,V.jsx)(h.A,{}),color:"#07a0cc",loading:t})}),(0,V.jsx)(i.A,{xs:24,sm:12,lg:a?12:8,children:(0,V.jsx)(Y,{title:(0,v.T)(G),value:s,icon:(0,V.jsx)(x.A,{}),color:"#07a0cc",loading:t})})]})})},se=({data:e})=>{const t=(e=>{if(!e)return{};const t={};return t[(0,v.T)(U)]={...e.downloads_by_categories_v1.pkg},t[(0,v.T)(H)]={total:e.downloads_by_categories_v1["pm:github"].total+e.downloads_by_categories_v1["pm:mirror"].total+e.downloads_by_categories_v1["pm:pypi"].total},t[(0,v.T)(q)]={total:e.downloads_by_categories_v1["ide:eclipse:mirror"].total+e.downloads_by_categories_v1["ide:plugin:eclipse:mirror"].total+e.downloads_by_categories_v1["ide:plugin:eclipse:github"].total},t[(0,v.T)(B)]={total:e.downloads_by_categories_v1["ide:plugin:vscode:mirror"].total+e.downloads_by_categories_v1["ide:plugin:vscode:github"].total},t[(0,v.T)(J)]={...e.downloads_by_categories_v1["3rdparty"]},t[(0,v.T)(Q)]={...e.downloads_by_categories_v1.humans},t})(e),a=Math.max(...Object.values(t).map(e=>e.total),0);return(0,V.jsxs)("div",{className:y.categorySection,children:[(0,V.jsx)("h3",{className:y.sectionTitle,children:(0,v.T)(z)}),(0,V.jsx)("div",{className:y.categoryGrid,children:Object.entries(t).map(([e,t])=>{const s=Math.log10(t.total+1),n=Math.min(t.total/1e4,.3),l=s*(1+n),i=Math.max(l,.1),o=Math.log10(a+1)*(1+Math.min(a/1e4,.3)),c=o>0?i/o*100:10;return console.log(`${e}: \u539f\u59cb\u503c=${t.total}, \u5bf9\u6570=${s.toFixed(2)}, \u7ebf\u6027\u56e0\u5b50=${n.toFixed(2)}, \u8ba1\u7b97\u503c=${l.toFixed(2)}, \u8c03\u6574\u503c=${i.toFixed(2)}, \u767e\u5206\u6bd4=${c.toFixed(2)}%`),(0,V.jsxs)("div",{className:y.categoryCard,children:[(0,V.jsxs)("div",{className:y.categoryHeader,children:[(0,V.jsx)("span",{className:y.categoryName,children:e}),(0,V.jsx)("span",{className:y.categoryValue,children:t.total.toLocaleString()})]}),(0,V.jsx)(r.A,{percent:c,showInfo:!1,strokeColor:"#07a0cc",className:y.categoryProgress})]},e)})})]})},ne=({data:e})=>{const t=[{key:"1",label:(0,v.T)(F),children:(0,V.jsx)(ee,{data:e?.top_commands||{},title:(0,v.T)(P)})}],a=[{key:"1",label:(0,v.T)(W),children:(0,V.jsx)(ee,{data:e?.top_packages||{},title:(0,v.T)(K)})}];return(0,V.jsx)("div",{className:y.chartsSection,children:(0,V.jsxs)(l.A,{gutter:[24,24],children:[(0,V.jsx)(i.A,{xs:24,lg:12,children:(0,V.jsx)(o.A,{className:y.chartCard,children:(0,V.jsx)(c.A,{defaultActiveKey:"1",items:t})})}),(0,V.jsx)(i.A,{xs:24,lg:12,children:(0,V.jsx)(o.A,{className:y.chartCard,children:(0,V.jsx)(c.A,{defaultActiveKey:"1",items:a})})})]})})},le=({data:e})=>(0,V.jsx)("div",{className:y.updateTime,children:(0,V.jsxs)("p",{children:[(0,v.T)(X),": ",String(e.last_updated).slice(0,16).replace("T"," ")]})}),ie=()=>{const e=f(),[t,a]=(0,s.useState)(null),[n,l]=(0,s.useState)(null),[i,r]=(0,s.useState)(!0),o=(0,s.useRef)(),c=(0,s.useRef)(null),[m,u]=(0,s.useState)(!0),h=(()=>{const[e,t]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if("undefined"==typeof window)return;const e=()=>t(window.matchMedia("(max-width: 1024px)").matches);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e})();(0,s.useEffect)(()=>{if("undefined"==typeof window||"undefined"==typeof IntersectionObserver)return;const e=document.querySelector("footer");if(e){c.current=e;const t=new IntersectionObserver(e=>{e.forEach(e=>u(e.isIntersecting))},{threshold:[0]});return t.observe(e),()=>t.disconnect()}},[]),(0,s.useEffect)(()=>{if(!e)return;"undefined"!=typeof process&&process.env;let t=null,s=0;const i=async()=>{if(!(s>5))try{r(!0);const t=await e.post("/fe/dashboard",{});a(t.data),l(null)}catch(n){l(n),t=setTimeout(i,1e3*Math.pow(2,s)),s++}finally{r(!1)}};if("requestIdleCallback"in window){const e=requestIdleCallback(i);return()=>{cancelIdleCallback(e),clearTimeout(t)}}return t=setTimeout(i,500),()=>clearTimeout(t)},[e]);const x=t?.downloads_by_categories_v1["pm:github"].total+t?.downloads_by_categories_v1["pm:mirror"].total+t?.downloads_by_categories_v1["pm:pypi"].total;return(0,V.jsxs)("div",{ref:o,className:y.container,style:{pointerEvents:m&&h?"none":"auto"},children:[(0,V.jsx)("div",{className:y.backgroundHeader}),(0,V.jsxs)("div",{className:y.animationContainer,"aria-hidden":"true",children:[(0,V.jsx)("div",{className:`${y.blob} ${y.blob1}`}),(0,V.jsx)("div",{className:`${y.blob} ${y.blob2}`}),(0,V.jsx)("div",{className:`${y.blob} ${y.blob3}`})]}),(0,V.jsx)(d.Ay,{renderEmpty:Z,theme:{components:{Tabs:{itemSelectedColor:"#0A2C7E",inkBarColor:"#F9C23C"},Card:{borderRadius:12,boxShadow:"0 8px 24px rgba(16, 24, 40, 0.06)",borderColor:"rgba(16, 24, 40, 0.04)"}}},children:(0,V.jsxs)("div",{className:y.mainContent,children:[h&&(0,V.jsx)(te,{pmDownloads:x,loading:i}),(0,V.jsx)(ae,{data:t,loading:i,isMobile:h}),t&&(0,V.jsx)(se,{data:t}),(0,V.jsx)(ne,{data:t}),t&&(0,V.jsx)(le,{data:t})]})})]})},re=()=>(0,V.jsx)(n.A,{title:"Data Panel",description:"RuyiSDK Data Panel",children:(0,V.jsxs)("div",{className:"min-h-screen bg-[#f5f5f7] text-[#1d1d1f] relative overflow-hidden flex flex-col font-sans",children:[(0,V.jsx)("div",{className:"relative z-20 text-center pt-14 px-8 pb-6 bg-transparent border-b border-[rgba(0,0,0,0.06)]",children:(0,V.jsx)("h1",{className:"m-0 mb-4 text-[clamp(1.8rem,4vw,3rem)] font-extrabold text-[#0A2C7E]",children:(0,v.T)({id:"RuyiSDK \u6570\u636e\u7edf\u8ba1",message:"RuyiSDK \u6570\u636e\u7edf\u8ba1"})})}),(0,V.jsx)("div",{className:"relative z-20 flex-1 flex justify-center items-start pt-10 pb-16 px-6",children:(0,V.jsx)("div",{className:"w-full max-w-site mx-auto",children:(0,V.jsx)(ie,{})})})]})})}}]);