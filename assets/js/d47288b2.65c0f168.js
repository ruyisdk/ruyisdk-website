"use strict";(globalThis.webpackChunkruyisdk=globalThis.webpackChunkruyisdk||[]).push([[5800],{18813(e,t,s){s.r(t),s.d(t,{default:()=>xe});var a=s(30758),n=s(93618),i=s(67562),l=s(41707),r=s(91627),o=s(88603),c=s(78406),d=s(94526),m=s(60934),u=s(30717),x=s(49686),h=s(66903),p=s(27400),f=s(90052);const g=()=>{const{siteConfig:{customFields:e}}=(0,f.A)();return(0,a.useMemo)(()=>{if(!e.apiURL)return null;return p.A.create({baseURL:`https://${e.apiURL}`,timeout:1e4,headers:{"Content-Type":"application/json"}})},[e.apiURL])};var j=s(84799);const v={container:"container_K9Vd",mainContent:"mainContent_IFq6",installSection:"installSection_Prus",installContainer:"installContainer_j6Sb",installContent:"installContent_pWem",installTitle:"installTitle_WKa1",installIcon:"installIcon_S3HE",installValue:"installValue_AC_4",statsSection:"statsSection_aYEI",statsRow:"statsRow_Ui_e",statCard:"statCard_xrKJ",statIcon:"statIcon_t6nk",statContent:"statContent_GiAO",statTitle:"statTitle_uZSO",statValue:"statValue_y9y1",valueNumber:"valueNumber_Q1fe",loadingSkeleton:"loadingSkeleton_OFPU",categorySection:"categorySection_utrp",sectionTitle:"sectionTitle_eMsW",categoryGrid:"categoryGrid_lWLG",categoryCard:"categoryCard_gOUl",categoryHeader:"categoryHeader_EdRX",categoryName:"categoryName_HboR",categoryValue:"categoryValue_CqoZ",categoryProgress:"categoryProgress_a0hQ",chartsSection:"chartsSection_V2Lw",chartCard:"chartCard_DdOt",chartContainer:"chartContainer_vuZK",chartTitle:"chartTitle_LoLM",chartWrapper:"chartWrapper_zTfd",chart:"chart_TLiG",emptyState:"emptyState_JsSJ",emptyIcon:"emptyIcon_r896",emptyText:"emptyText_tTyr",updateTime:"updateTime_GT_o","ant-col":"ant-col_o6x4"};var y=s(20281);const _="statCard_gRfp",b="statIcon_l9dh",N="statContent_JS1w",w="statTitle_wRva",T="statValue_APbm",C="loadingSkeleton_VLym",A="standaloneContainer_kQ_C",S="flipCounter_uQpi",E="flipDigit_9fVB",k="flipCard_OGfP",I="flipping_nJyy",R="flipCardFront_XxWT",F="flipCardBack_gjD9";var M=s(86070);const V=({digit:e})=>{const[t,s]=(0,a.useState)(e),[n,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{e!==t&&(i(!0),setTimeout(()=>{s(e),i(!1)},300))},[e,t]),(0,M.jsx)("div",{className:E,children:(0,M.jsxs)("div",{className:`${k} ${n?I:""}`,children:[(0,M.jsx)("div",{className:R,children:(0,M.jsx)("span",{children:t})}),(0,M.jsx)("div",{className:F,children:(0,M.jsx)("span",{children:e})})]})})},$=({value:e,title:t,icon:s,color:n,loading:i,standalone:l=!1})=>{const[r,o]=(0,a.useState)(0),[c,d]=(0,a.useState)(!1),m=(0,a.useRef)(null);(0,a.useEffect)(()=>{if("undefined"==typeof window)return;const e=new IntersectionObserver(([e])=>{e.isIntersecting&&d(!0)},{threshold:.1});return m.current&&e.observe(m.current),()=>e.disconnect()},[]),(0,a.useEffect)(()=>{if(c&&!i&&"number"==typeof e){const t=60,s=e/t;let a=0;const n=setInterval(()=>{a+=s,a>=e?(o(e),clearInterval(n)):o(Math.floor(a))},2e3/t);return()=>clearInterval(n)}},[c,e,i]);const u=(h=r,h.toString().padStart(6,"0")).split("");var h;return l?(0,M.jsx)("div",{className:A,ref:m,children:(0,M.jsx)("div",{className:S,children:u.map((e,t)=>(0,M.jsx)(V,{digit:parseInt(e)},t))})}):(0,M.jsxs)("div",{className:_,ref:m,"data-stat":t,children:[(0,M.jsx)("div",{className:b,style:{color:n},children:(0,M.jsx)(x.A,{})}),(0,M.jsxs)("div",{className:N,children:[(0,M.jsx)("h3",{className:w,children:t}),(0,M.jsx)("div",{className:T,children:i?(0,M.jsx)("div",{className:C}):(0,M.jsx)("div",{className:S,children:u.map((e,t)=>(0,M.jsx)(V,{digit:parseInt(e)},t))})})]})]})},D=["#0A2C7E","#1A3A8E","#2A4A9E","#3A5AAE","#4A6ABE","#5A7ACE","#6A8ADE","#7A9AEE","#8AAAEE","#9ABAEE"],L={id:"\u6682\u65e0\u6570\u636e",message:"\u6682\u65e0\u6570\u636e"},O={id:"\u6700\u5e38\u7528\u6307\u4ee4 Top Commands",message:"\u6700\u5e38\u7528\u6307\u4ee4"},W={id:"\u6700\u5e38\u7528\u5305 Top Packages",message:"\u6700\u5e38\u7528\u5305"},G={id:"\u6700\u5e38\u7528\u6307\u4ee4",message:"\u6700\u5e38\u7528\u6307\u4ee4"},P={id:"\u6700\u5e38\u7528\u5305",message:"\u6700\u5e38\u7528\u5305"},H={id:"ruyi\u5b89\u88c5\u53f0\u6570",message:"ruyi\u5b89\u88c5\u53f0\u6570"},z={id:"\u8be6\u7ec6\u4e0b\u8f7d\u7edf\u8ba1",message:"\u8be6\u7ec6\u4e0b\u8f7d\u7edf\u8ba1"},K={id:"\u7ec4\u4ef6\u4e0b\u8f7d\u6570\u91cf",message:"\u7ec4\u4ef6\u4e0b\u8f7d\u6570\u91cf"},U={id:"ruyi\u5305\u7ba1\u7406\u5668\u4e0b\u8f7d\u6b21\u6570",message:"ruyi\u5305\u7ba1\u7406\u5668\u4e0b\u8f7d\u6b21\u6570"},q={id:"IDE\u4e0b\u8f7d\u6b21\u6570",message:"IDE\u4e0b\u8f7d\u6b21\u6570"},B={id:"vscode\u4e0b\u8f7d\u6b21\u6570",message:"VSCode\u4e0b\u8f7d\u6b21\u6570"},J={id:"\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u4e0b\u8f7d\u6b21\u6570",message:"\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u4e0b\u8f7d\u6b21\u6570"},Q={id:"\u6587\u6863\u4e0b\u8f7d\u6570\u91cf",message:"\u6587\u6863\u4e0b\u8f7d\u6570\u91cf"},X={id:"\u6570\u636e\u66f4\u65b0\u65f6\u95f4",message:"\u6570\u636e\u66f4\u65b0\u65f6\u95f4"},Z=()=>(0,M.jsxs)("div",{className:v.emptyState,children:[(0,M.jsx)(m.A,{className:v.emptyIcon}),(0,M.jsx)("p",{className:v.emptyText,children:(0,j.T)(L)})]}),Y=({title:e,value:t,icon:s,color:n,loading:i})=>{const[l,r]=(0,a.useState)(0),{elementRef:o,isVisible:c}=((e,t={threshold:.1})=>{const s=(0,a.useRef)(null),[n,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if("undefined"==typeof window)return;const a=new IntersectionObserver(([t])=>{t.isIntersecting&&(i(!0),e?.(t))},t);return s.current&&a.observe(s.current),()=>a.disconnect()},[e,t]),{elementRef:s,isVisible:n}})();return(0,a.useEffect)(()=>{if(c&&!i&&"number"==typeof t){const e=t/60;let s=0;const a=setInterval(()=>{s+=e,s>=t?(r(t),clearInterval(a)):r(Math.floor(s))},2e3/60);return()=>clearInterval(a)}},[c,t,i]),(0,M.jsxs)("div",{className:v.statCard,ref:o,"data-stat":e,children:[(0,M.jsx)("div",{className:v.statIcon,style:{color:n},children:s}),(0,M.jsxs)("div",{className:v.statContent,children:[(0,M.jsx)("h3",{className:v.statTitle,children:e}),(0,M.jsx)("div",{className:v.statValue,children:i?(0,M.jsx)("div",{className:v.loadingSkeleton}):(0,M.jsx)("span",{className:v.valueNumber,children:"number"==typeof t?l.toLocaleString():t})})]})]})},ee=({data:e,title:t})=>{const s=(0,a.useRef)(),n=(0,a.useRef)(),i=((e,t)=>{const[s,n]=(0,a.useState)(e);return(0,a.useEffect)(()=>{const s=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(s)}},[e,t]),s})(e,300),l=(0,a.useMemo)(()=>i?Object.entries(e).map(([e,{total:t}])=>({action:e,total:t,logTotal:Math.pow(t,.4)*(1+t/2e3)*.6})).sort((e,t)=>t.total-e.total).slice(0,10):[],[i]);return(0,a.useEffect)(()=>{if("undefined"==typeof window||!l.length||!s.current)return;n.current&&n.current.destroy();const e=new y.t1({container:s.current,autoFit:!0,events:{enabled:!1}});n.current=e,e.coordinate({transform:[{type:"transpose"}]}),e.interval().style({fill:(e,t)=>{const s=Math.max(...l.map(e=>e.total)),a=Math.min(...l.map(e=>e.total)),n=(e.total-a)/(s-a),i=Math.floor((1-n)*(D.length-1));return D[i]}}).data(l).transform({type:"sortX",reverse:!0,by:"y"}).axis("x",{line:!1,title:!1,label:!1,tick:!1,grid:!1}).axis("y",{title:!1,line:!1,tick:!1,grid:!1}).encode("x","action").encode("y","logTotal").scale("y",{nice:!1,padding:.6,min:0,max:3.5*Math.max(...l.map(e=>e.logTotal)),tickCount:0}).scale("x",{padding:.6,tickCount:0}).style("maxWidth",200).label({text:"action",position:"top-left",fill:"#2E3A46",dy:-12,fontWeight:600,fontSize:12}).label({text:"total",position:"inside",fill:"#ffffff",dy:0,dx:-5,fontWeight:700,fontSize:12}).interaction({tooltip:{body:!1}}),e.interaction("view-scroll",!1),e.render()},[l]),(0,M.jsxs)("div",{className:v.chartContainer,children:[(0,M.jsx)("h3",{className:v.chartTitle,children:t}),(0,M.jsx)("div",{className:v.chartWrapper,children:l.length?(0,M.jsx)("div",{ref:s,className:v.chart}):(0,M.jsx)(Z,{})})]})},te=({pmDownloads:e,loading:t})=>(0,M.jsx)("div",{className:v.installSection,children:(0,M.jsx)("div",{className:v.installContainer,children:(0,M.jsxs)("div",{className:v.installContent,children:[(0,M.jsxs)("h2",{className:v.installTitle,children:[(0,M.jsx)("span",{className:v.installIcon,children:"\ud83d\udcbb"}),(0,j.T)(U)]}),(0,M.jsx)("div",{className:v.installValue,children:t?(0,M.jsx)("div",{className:v.loadingSkeleton}):(0,M.jsx)($,{value:e,loading:t,standalone:!0})})]})})}),se=({data:e,loading:t,isMobile:s})=>{const a=e?.installs?.total||0,n=e?.downloads?.total||0,r=e?.pm_downloads?.total||0;return(0,M.jsx)("div",{className:v.statsSection,children:(0,M.jsxs)(i.A,{gutter:[24,24],className:v.statsRow,children:[!s&&(0,M.jsx)(l.A,{xs:24,sm:12,lg:8,children:(0,M.jsx)(Y,{title:(0,j.T)(U),value:r,icon:(0,M.jsx)(u.A,{}),color:"#07a0cc",loading:t})}),(0,M.jsx)(l.A,{xs:24,sm:12,lg:s?12:8,children:(0,M.jsx)(Y,{title:(0,j.T)(K),value:n,icon:(0,M.jsx)(x.A,{}),color:"#07a0cc",loading:t})}),(0,M.jsx)(l.A,{xs:24,sm:12,lg:s?12:8,children:(0,M.jsx)(Y,{title:(0,j.T)(H),value:a,icon:(0,M.jsx)(h.A,{}),color:"#07a0cc",loading:t})})]})})},ae=({data:e})=>{const t=(e=>{if(!e)return{};const t={};return t[(0,j.T)(K)]={...e.downloads_by_categories_v1.pkg},t[(0,j.T)(U)]={total:e.downloads_by_categories_v1["pm:github"].total+e.downloads_by_categories_v1["pm:mirror"].total+e.downloads_by_categories_v1["pm:pypi"].total},t[(0,j.T)(q)]={total:e.downloads_by_categories_v1["ide:eclipse:mirror"].total+e.downloads_by_categories_v1["ide:plugin:eclipse:mirror"].total+e.downloads_by_categories_v1["ide:plugin:eclipse:github"].total},t[(0,j.T)(B)]={total:e.downloads_by_categories_v1["ide:plugin:vscode:mirror"].total+e.downloads_by_categories_v1["ide:plugin:vscode:github"].total},t[(0,j.T)(J)]={...e.downloads_by_categories_v1["3rdparty"]},t[(0,j.T)(Q)]={...e.downloads_by_categories_v1.humans},t})(e),s=Math.max(...Object.values(t).map(e=>e.total),0);return(0,M.jsxs)("div",{className:v.categorySection,children:[(0,M.jsx)("h3",{className:v.sectionTitle,children:(0,j.T)(z)}),(0,M.jsx)("div",{className:v.categoryGrid,children:Object.entries(t).map(([e,t])=>{const a=Math.log10(t.total+1),n=Math.min(t.total/1e4,.3),i=a*(1+n),l=Math.max(i,.1),o=Math.log10(s+1)*(1+Math.min(s/1e4,.3)),c=o>0?l/o*100:10;return console.log(`${e}: \u539f\u59cb\u503c=${t.total}, \u5bf9\u6570=${a.toFixed(2)}, \u7ebf\u6027\u56e0\u5b50=${n.toFixed(2)}, \u8ba1\u7b97\u503c=${i.toFixed(2)}, \u8c03\u6574\u503c=${l.toFixed(2)}, \u767e\u5206\u6bd4=${c.toFixed(2)}%`),(0,M.jsxs)("div",{className:v.categoryCard,children:[(0,M.jsxs)("div",{className:v.categoryHeader,children:[(0,M.jsx)("span",{className:v.categoryName,children:e}),(0,M.jsx)("span",{className:v.categoryValue,children:t.total.toLocaleString()})]}),(0,M.jsx)(r.A,{percent:c,showInfo:!1,strokeColor:"#07a0cc",className:v.categoryProgress})]},e)})})]})},ne=({data:e})=>{const t=[{key:"1",label:(0,j.T)(O),children:(0,M.jsx)(ee,{data:e?.top_commands||{},title:(0,j.T)(G)})}],s=[{key:"1",label:(0,j.T)(W),children:(0,M.jsx)(ee,{data:e?.top_packages||{},title:(0,j.T)(P)})}];return(0,M.jsx)("div",{className:v.chartsSection,children:(0,M.jsxs)(i.A,{gutter:[24,24],children:[(0,M.jsx)(l.A,{xs:24,lg:12,children:(0,M.jsx)(o.A,{className:v.chartCard,children:(0,M.jsx)(c.A,{defaultActiveKey:"1",items:t})})}),(0,M.jsx)(l.A,{xs:24,lg:12,children:(0,M.jsx)(o.A,{className:v.chartCard,children:(0,M.jsx)(c.A,{defaultActiveKey:"1",items:s})})})]})})},ie=({data:e})=>(0,M.jsx)("div",{className:v.updateTime,children:(0,M.jsxs)("p",{children:[(0,j.T)(X),": ",String(e.last_updated).slice(0,16).replace("T"," ")]})}),le=()=>{const e=g(),[t,s]=(0,a.useState)(null),[n,i]=(0,a.useState)(null),[l,r]=(0,a.useState)(!0),o=(0,a.useRef)(),c=(0,a.useRef)(null),[m,u]=(0,a.useState)(!0),x=(()=>{const[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if("undefined"==typeof window)return;const e=()=>t(window.matchMedia("(max-width: 1024px)").matches);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e})();(0,a.useEffect)(()=>{if("undefined"==typeof window||"undefined"==typeof IntersectionObserver)return;const e=document.querySelector("footer");if(e){c.current=e;const t=new IntersectionObserver(e=>{e.forEach(e=>u(e.isIntersecting))},{threshold:[0]});return t.observe(e),()=>t.disconnect()}},[]),(0,a.useEffect)(()=>{if(!e)return;"undefined"!=typeof process&&process.env;let t=null,a=0;const l=async()=>{if(!(a>5))try{r(!0);const t=await e.post("/fe/dashboard",{});s(t.data),i(null)}catch(n){i(n),t=setTimeout(l,1e3*Math.pow(2,a)),a++}finally{r(!1)}};if("requestIdleCallback"in window){const e=requestIdleCallback(l);return()=>{cancelIdleCallback(e),clearTimeout(t)}}return t=setTimeout(l,500),()=>clearTimeout(t)},[e]);const h=t?.downloads_by_categories_v1["pm:github"].total+t?.downloads_by_categories_v1["pm:mirror"].total+t?.downloads_by_categories_v1["pm:pypi"].total;return(0,M.jsxs)("div",{ref:o,className:v.container,style:{pointerEvents:m&&x?"none":"auto"},children:[(0,M.jsx)("div",{className:v.backgroundHeader}),(0,M.jsxs)("div",{className:v.animationContainer,"aria-hidden":"true",children:[(0,M.jsx)("div",{className:`${v.blob} ${v.blob1}`}),(0,M.jsx)("div",{className:`${v.blob} ${v.blob2}`}),(0,M.jsx)("div",{className:`${v.blob} ${v.blob3}`})]}),(0,M.jsx)(d.Ay,{renderEmpty:Z,theme:{components:{Tabs:{itemSelectedColor:"#0A2C7E",inkBarColor:"#F9C23C"},Card:{borderRadius:12,boxShadow:"0 8px 24px rgba(16, 24, 40, 0.06)",borderColor:"rgba(16, 24, 40, 0.04)"}}},children:(0,M.jsxs)("div",{className:v.mainContent,children:[x&&(0,M.jsx)(te,{pmDownloads:h,loading:l}),(0,M.jsx)(se,{data:t,loading:l,isMobile:x}),t&&(0,M.jsx)(ae,{data:t}),(0,M.jsx)(ne,{data:t}),t&&(0,M.jsx)(ie,{data:t})]})})]})};var re=s(86112),oe=s(26596),ce=s(90163),de=s(52264),me=s(99588),ue=s(51347);const xe=()=>{const[e,t]=(0,a.useState)(null),[s,i]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{try{i(!0),"undefined"!=typeof process&&process.env;{const e=await fetch("https://api.github.com/repos/ruyisdk/ruyi");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json(),a={stars:s.stargazers_count,forks:s.forks_count,issues:s.open_issues_count,commits:s.size,watchers:s.watchers_count};t(a)}}catch(e){console.error("Failed to fetch GitHub stats:",e)}finally{i(!1)}})()},[]),(0,M.jsx)(n.A,{title:"Data Panel",description:"RuyiSDK Data Panel",children:(0,M.jsxs)("div",{className:"min-h-screen bg-[#f5f5f7] text-[#1d1d1f] relative overflow-hidden flex flex-col font-sans",children:[(0,M.jsxs)("div",{className:"relative z-20 text-center pt-14 px-8 pb-6 bg-transparent border-b border-[rgba(0,0,0,0.06)]",children:[(0,M.jsx)("h1",{className:"m-0 mb-4 text-[clamp(1.8rem,4vw,3rem)] font-extrabold text-[#0A2C7E]",children:(0,j.T)({id:"RuyiSDK \u6570\u636e\u7edf\u8ba1",message:"RuyiSDK \u6570\u636e\u7edf\u8ba1"})}),(0,M.jsxs)("p",{className:"flex items-center justify-center gap-4 my-2 text-sm text-[#6a737d] flex-wrap transition-all duration-300 ease-in-out hover:-translate-y-[1px]",children:[(0,M.jsx)(re.A,{className:"text-[#24292e] text-base mr-2"}),s?(0,M.jsx)("span",{className:"text-[#6a737d] text-sm italic",children:(0,j.T)({id:"\u52a0\u8f7d\u4e2d...",message:"Loading..."})}):e?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("span",{className:"flex items-center gap-1 font-medium whitespace-nowrap",title:"Stars",children:[(0,M.jsx)(oe.A,{className:"text-[#FFD700] text-sm"}),e.stars]}),(0,M.jsxs)("span",{className:"flex items-center gap-1 font-medium whitespace-nowrap",title:"Forks",children:[(0,M.jsx)(ce.A,{className:"text-[#1890FF] text-sm"}),e.forks]}),(0,M.jsxs)("span",{className:"flex items-center gap-1 font-medium whitespace-nowrap",title:"Open Issues",children:[(0,M.jsx)(de.A,{className:"text-[#FF4D4F] text-sm"}),e.issues]}),(0,M.jsxs)("span",{className:"flex items-center gap-1 font-medium whitespace-nowrap",title:"Commits",children:[(0,M.jsx)(me.A,{className:"text-[#52C41A] text-sm"}),e.commits]}),(0,M.jsxs)("span",{className:"flex items-center gap-1 font-medium whitespace-nowrap",title:"Watchers",children:[(0,M.jsx)(ue.A,{className:"text-[#722ED1] text-sm"}),e.watchers]})]}):(0,M.jsx)("span",{className:"text-[#6a737d] text-sm italic",children:(0,j.T)({id:"GitHub\u6570\u636e\u4e0d\u53ef\u7528",message:"GitHub data unavailable"})})]})]}),(0,M.jsx)("div",{className:"relative z-20 flex-1 flex justify-center items-start pt-10 pb-16 px-6",children:(0,M.jsx)("div",{className:"w-full max-w-site mx-auto",children:(0,M.jsx)(le,{})})})]})})}}}]);